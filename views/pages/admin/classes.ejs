<%- include('../../partials/header', {title: 'Manage Classes'}) %>
<%- include('../../partials/sidebar', { user: user, role: user.role }) %>


<style>
    .container {
        margin-left: 250px; /* Same width as the sidebar */
        padding: 20px;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
        .container {
            margin-left: 0; /* Remove margin for small screens */
        }
    }
    
</style>

<div class="dashboard-container container">
<h1>Manage Classes</h1>

<a href="/admin/class/add" class="btn btn-primary mb-3">Add New Class</a>

<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Teacher</th>
            <th>Subjects</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% classes.forEach(function(classItem) { %>
            <tr>
                <td><%= classItem.id %></td>
                <td><%= classItem.name %></td>
                <td><%= classItem.Teacher ? classItem.Teacher.username : 'Not Assigned' %></td>
                <td><%= classItem.Subjects.map(s => s.name).join(', ') || 'None' %></td>
                <td>
                    <a href="/admin/class/edit/<%= classItem.id %>" class="btn btn-sm btn-warning">Edit</a>
                    <form action="/admin/class/delete/<%= classItem.id %>" method="POST" class="d-inline">
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this class?')">Delete</button>
                    </form>
                </td>
            </tr>
        <% }); %>
    </tbody>
</table>

<a href="/admin/dashboard" class="btn btn-secondary mt-3">Back to Dashboard</a>

<%- include('../../partials/footer') %>
</div>